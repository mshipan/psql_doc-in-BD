# PostgreSQL ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржи (ржмрж╛ржВрж▓рж╛)

<details>
<summary><strong>1. psql ржПржмржВ ржПрж░ ржбрж┐ржлрж▓рзНржЯ ржЖржЪрж░ржг, ржбрж╛ржЯрж╛ржмрзЗрж╕ рждрзИрж░рж┐ ржХрж░рж╛</strong></summary>

### ЁЯФ╢ psql ржХрзА?

psql рж╣рж▓рзЛ PostgreSQL-ржПрж░ ржПржХржЯрж┐ ржЗржирзНржЯрж╛рж░рзЗржХрзНржЯрж┐ржн ржЯрж╛рж░рзНржорж┐ржирж╛рж▓ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ, ржпрзЗржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржкржирж┐ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржкрзНрж░рж╢рзНржи ржХрж░рждрзЗ (query) ржПржмржВ ржХржорж╛ржирзНржб ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░рзЗржиред ржПржЯрж┐ PostgreSQL рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ рж╕рж░рж╛рж╕рж░рж┐ рж╕ржВржпрзБржХрзНржд рж╣рзЯрзЗ ржХрж╛ржЬ ржХрж░рзЗред

### ЁЯФ╢ psql ржПрж░ ржбрж┐ржлрж▓рзНржЯ ржЖржЪрж░ржг:

ржпржЦржи ржЖржкржирж┐ psql ржЪрж╛рж▓рж╛ржи, рждржЦржи ржПржЯрж┐ ржирж┐ржЪрзЗрж░ ржХрж╛ржЬржЧрзБрж▓рзЛ ржХрж░рзЗ:

1. ржбрж┐ржлрж▓рзНржЯ ржЗржЙржЬрж╛рж░ ржУ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржХрж╛ржирзЗржХрзНржЯ рж╣рзЯ:

- рж╕рж╛ржзрж╛рж░ржгржд ржЖржкржирж╛рж░ ржЕржкрж╛рж░рзЗржЯрж┐ржВ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржЗржЙржЬрж╛рж░ржирзЗржЗржо ржЕржирзБржпрж╛рзЯрзА ржПржХржЗ ржирж╛ржорзЗрж░ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржХрж╛ржирзЗржХрзНржЯ рж╣рзЯред
- ржЙржжрж╛рж╣рж░ржг:

```bash
  $ psql
```

ржпржжрж┐ ржЖржкржирж╛рж░ ржЗржЙржЬрж╛рж░ржирзЗржЗржо shipan рж╣рзЯ, рждрж╛рж╣рж▓рзЗ ржПржЯрж┐ shipan ржирж╛ржорзЗ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржХрж╛ржирзЗржХрзНржЯ рж╣ржУрзЯрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░ржмрзЗред

2. ржЗржирзНржЯрж╛рж░рзЗржХрзНржЯрж┐ржн ржорзЛржбрзЗ ржХрж╛ржЬ ржХрж░рзЗ:

- ржЖржкржирж┐ рж╕рж░рж╛рж╕рж░рж┐ SQL ржХржорж╛ржирзНржб ржжрж┐рждрзЗ ржкрж╛рж░рзЗржиред
- ржкрзНрж░рждрж┐ржЯрж┐ ржХржорж╛ржирзНржб ; ржжрж┐рзЯрзЗ рж╢рзЗрж╖ ржХрж░рждрзЗ рж╣рзЯред

3. ржХрж┐ржЫрзБ ржХржорж╛ржирзНржб рж╢рзБрж░рзБ рж╣рзЯ \ ржжрж┐рзЯрзЗ:

- ржПржЧрзБрж▓рзЛ psql-specific internal command, ржпрзЗржоржи:
  - \l : рж╕ржорж╕рзНржд ржбрж╛ржЯрж╛ржмрзЗржЬрзЗрж░ рждрж╛рж▓рж┐ржХрж╛
  - \c dbname : ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржХрж╛ржирзЗржХрзНржЯ
  - \dt : ржЯрзЗржмрж┐рж▓ рждрж╛рж▓рж┐ржХрж╛
  - \q : psql ржерзЗржХрзЗ ржмрзЗрж░ рж╣ржУрзЯрж╛

### ЁЯФ╖ PostgreSQL-ржП ржбрж╛ржЯрж╛ржмрзЗржЬ рждрзИрж░рж┐

ржбрж╛ржЯрж╛ржмрзЗржЬ рждрзИрж░рж┐ ржХрж░рж╛ ржпрж╛рзЯ ржжрзБржЗржнрж╛ржмрзЗ:

1. SQL ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ:

```sql
  CREATE DATABASE database_name;
```

2. psql ржЗржирзНржЯрж╛рж░ржлрзЗрж╕рзЗ createdb ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ:

```bash
  $ createdb company_db
```

ржжрзБржЗ ржХржорж╛ржирзНржб ржПржХржЗ ржХрж╛ржЬ ржХрж░рзЗ тАФ ржкрж╛рж░рзНржержХрзНржп рж╣рж▓рзЛ, ржкрзНрж░ржержоржЯрж┐ SQL ржХржорж╛ржирзНржб, ржжрзНржмрж┐рждрзАрзЯржЯрж┐ psql-ржПрж░ CLI utility

### ЁЯФ╖ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржХрж╛ржирзЗржХрзНржЯ рж╣ржУрзЯрж╛:

```bash
  $ psql -d database_name
```

ржЕржержмрж╛ psql ржЪрж╛рж▓рж┐рзЯрзЗ, ржПрж░ ржкрж░рзЗ \c ржХржорж╛ржирзНржб:

```sql
  \c company_db
```

### ЁЯФ╖ рж╕ржВржХрзНрж╖рж┐ржкрзНржд ржЙржжрж╛рж╣рж░ржг:

```bash
  $ createdb testdb     # ржбрж╛ржЯрж╛ржмрзЗржЬ рждрзИрж░рж┐
  $ psql                # psql ржЪрж╛рж▓рзБ
```

```sql
  \c testdb             -- ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржХрж╛ржирзЗржХрзНржЯ
  CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100)
  );                    -- ржЯрзЗржмрж┐рж▓ рждрзИрж░рж┐
```

### ЁЯФО ржЯрж┐ржкрж╕:

| ржХржорж╛ржирзНржб      | ржХрж╛ржЬ                  |
| ----------- | -------------------- |
| `\l`        | рж╕ржорж╕рзНржд ржбрж╛ржЯрж╛ржмрзЗржЬ ржжрзЗржЦрж╛рзЯ  |
| `\c dbname` | ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржХрж╛ржирзЗржХрзНржЯ     |
| `\dt`       | ржЯрзЗржмрж┐рж▓ рждрж╛рж▓рж┐ржХрж╛ ржжрзЗржЦрж╛рзЯ   |
| `\q`        | `psql` ржерзЗржХрзЗ ржмрзЗрж░ рж╣ржУрзЯрж╛ |

</details>

<details>
<summary><strong>2. ржЗржЙржЬрж╛рж░, рж░рзЛрж▓ ржУ ржкрзНрж░рж┐ржнрж┐рж▓рзЗржЬ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ</strong></summary>

### ЁЯФ╢ рж░рзЛрж▓ (Role) ржХрзА?

PostgreSQL-ржП Role ржмрж▓рждрзЗ ржЗржЙржЬрж╛рж░ ржПржмржВ ржЧрзНрж░рзБржк ржжрзБржЯрзЛржЗ ржмрзЛржЭрж╛рзЯред рж░рзЛрж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржкржирж┐:

- ржЗржЙржЬрж╛рж░ рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи
- ржмрж┐ржнрж┐ржирзНржи ржЕржзрж┐ржХрж╛рж░ ржжрж┐рждрзЗ ржкрж╛рж░рзЗржи
- ржЧрзНрж░рзБржк рж░рзЛрж▓рзЗрж░ ржорждрзЛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХрж╛ржзрж┐ржХ ржЗржЙржЬрж╛рж░ржХрзЗ ржПржХржЗ ржЕржзрж┐ржХрж╛рж░ ржжрж┐рждрзЗ ржкрж╛рж░рзЗржи

тЬЕ Role = User = Group (PostgreSQL-ржП ржПрж░рж╛ ржПржХржЗ ржЬрж┐ржирж┐рж╕)

### ЁЯФ╖ рж░рзЛрж▓ рждрзИрж░рж┐ ржХрж░рж╛ (Creating Roles):

```sql
  CREATE ROLE role_name;
```

ржЙржжрж╛рж╣рж░ржг:

```sql
  CREATE ROLE shipan;
```

ржПржЗ рж░рзЛрж▓ ржжрж┐рзЯрзЗ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ рж▓ржЧржЗржи ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛, ржХрж╛рж░ржг ржПржЦржирзЛ LOGIN ржкрж╛рж░ржорж┐рж╢ржи ржжрзЗржУрзЯрж╛ рж╣рзЯржирж┐ред

### ЁЯФ╖ рж▓ржЧржЗржи рж░рзЛрж▓ рждрзИрж░рж┐ ржХрж░рж╛ (Login Privilege рж╕рж╣):

```sql
  CREATE ROLE username WITH LOGIN PASSWORD 'your_password';
```

ржЙржжрж╛рж╣рж░ржг:

```sql
  CREATE ROLE shipan WITH LOGIN PASSWORD '1234';
```

ржПржЦржи shipan ржирж╛ржорзЗрж░ ржПржЗ рж░рзЛрж▓ ржжрж┐рзЯрзЗ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ рж▓ржЧржЗржи ржХрж░рж╛ ржпрж╛ржмрзЗред

### ЁЯФ╖ SUPERUSER рж░рзЛрж▓ рждрзИрж░рж┐:

```sql
  CREATE ROLE admin WITH LOGIN SUPERUSER PASSWORD 'admin123';
```

ржПржЗ рж░рзЛрж▓ржЯрж┐ PostgreSQL-ржПрж░ рж╕рж░рзНржмрзЛржЪрзНржЪ ржЕржирзБржорждрж┐рж╕ржорзНржкржирзНржи ржЕрзНржпрж╛ржбржорж┐ржи рж░рзЛрж▓ред

### ЁЯФ╖ ржЕржзрж┐ржХрж╛рж░ (Privileges) ржХрзА ржХрзА ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ?

| Privilege | ржХрж╛ржЬ                                  |
| --------- | ------------------------------------ |
| `SELECT`  | ржбрзЗржЯрж╛ ржжрзЗржЦрждрзЗ ржкрж╛рж░рзЗ                      |
| `INSERT`  | ржбрзЗржЯрж╛ ржпрзЛржЧ ржХрж░рждрзЗ ржкрж╛рж░рзЗ                   |
| `UPDATE`  | ржбрзЗржЯрж╛ ржЖржкржбрзЗржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗ                 |
| `DELETE`  | ржбрзЗржЯрж╛ ржорзБржЫрждрзЗ ржкрж╛рж░рзЗ                      |
| `CREATE`  | ржЯрзЗржмрж┐рж▓, рж╕рзНржХрж┐ржорж╛ ржЗрждрзНржпрж╛ржжрж┐ рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗ |
| `CONNECT` | ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ рж╕ржВржпрзБржХрзНржд рж╣рждрзЗ ржкрж╛рж░рзЗ            |

### ЁЯФ╖ рж░рзЛрж▓ржХрзЗ ржПржХржЯрж┐ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржжрзЗржУрзЯрж╛рж░ ржЬржирзНржп:

```sql
  GRANT CONNECT ON DATABASE your_db TO role_name;
```

ржЙржжрж╛рж╣рж░ржг:

```sql
  GRANT CONNECT ON DATABASE company_db TO shipan;
```

### ЁЯФ╖ рж░рзЛрж▓ржХрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЯрзЗржмрж┐рж▓рзЗ SELECT ржмрж╛ ржЕржирзНржпрж╛ржирзНржп ржЕржзрж┐ржХрж╛рж░ ржжрзЗржУрзЯрж╛:

```sql
  GRANT SELECT, INSERT ON TABLE table_name TO role_name;
```

ржЙржжрж╛рж╣рж░ржг:

```sql
  GRANT SELECT, INSERT ON TABLE employees TO shipan;
```

### ЁЯФ╖ рж░рзЛрж▓рзЗрж░ ржкрзНрж░ржкрж╛рж░рзНржЯрж┐ ржкрж░рж┐ржмрж░рзНрждржи (e.g., PASSWORD, LOGIN):

```sql
  ALTER ROLE role_name WITH PASSWORD 'new_password';
  ALTER ROLE role_name WITH LOGIN;
```

### ЁЯФ╖ рж░рзЛрж▓ ржорзБржЫрзЗ ржлрзЗрж▓рж╛:

```sql
  DROP ROLE role_name;
```

ржЙржжрж╛рж╣рж░ржг:

```sql
  DROP ROLE shipan;
```

тЪая╕П ржпржжрж┐ рж░рзЛрж▓ржЯрж┐ ржХрзЛржирзЛ ржбрж╛ржЯрж╛ржмрзЗржЬ ржмрж╛ ржЯрзЗржмрж┐рж▓рзЗрж░ ржорж╛рж▓рж┐ржХ рж╣рзЯ, ржЖржЧрзЗ рж╕рзЗржЗ ржорж╛рж▓рж┐ржХрж╛ржирж╛ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ рж╣ржмрзЗред

### ЁЯФ╖ ржПржХржЬржи рж░рзЛрж▓ржХрзЗ ржЖрж░рзЗржХржЯрж┐ рж░рзЛрж▓рзЗрж░ ржорзЗржорзНржмрж╛рж░ ржмрж╛ржирж╛ржирзЛ (Role Inheritance):

```sql
  GRANT parent_role TO child_role;
```

ржЙржжрж╛рж╣рж░ржг:

```sql
  GRANT developers TO shipan;
```

ржПржЦржи shipan рж░рзЛрж▓ржЯрж┐ developers рж░рзЛрж▓рзЗрж░ рж╕ржм ржЕржзрж┐ржХрж╛рж░ ржкрж╛ржмрзЗред

### ЁЯза рж╕ржВржХрзНрж╖рзЗржкрзЗ ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржорждрзЛ:

| ржХрж╛ржЬ           | ржХржорж╛ржирзНржб                                         |
| ------------- | ---------------------------------------------- |
| рж░рзЛрж▓ рждрзИрж░рж┐      | `CREATE ROLE name;`                            |
| рж▓ржЧржЗржи рж░рзЛрж▓      | `CREATE ROLE name WITH LOGIN PASSWORD 'pass';` |
| ржЕржзрж┐ржХрж╛рж░ ржжрзЗржУрзЯрж╛  | `GRANT SELECT ON table TO role;`               |
| ржЕржзрж┐ржХрж╛рж░ ржмрж╛рждрж┐рж▓  | `REVOKE SELECT ON table FROM role;`            |
| рж░рзЛрж▓ ржорзБржЫрзЗ ржлрзЗрж▓рж╛ | `DROP ROLE name;`                              |

</details>

<details>
<summary><strong>3. ржкрзНрж░рж┐ржнрж┐рж▓рзЗржЬ ржжрзЗржУрзЯрж╛ ржПржмржВ рждрзБрж▓рзЗ ржирзЗржУрзЯрж╛</strong></summary>

PostgreSQL-ржП ржбрж╛ржЯрж╛ржмрзЗржЬ ржирж┐рж░рж╛ржкрждрзНрждрж╛рж░ ржПржХржЯрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржжрж┐ржХ рж╣ржЪрзНржЫрзЗ privilege (ржЕржзрж┐ржХрж╛рж░) ржирж┐рзЯржирзНрждрзНрж░ржгред ржХрзЗ ржХрзЛржи ржЯрзЗржмрж┐рж▓, ржнрж┐ржЙ, ржмрж╛ ржбрж╛ржЯрж╛ржмрзЗржЬ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ, рж╕рзЗржЯрж┐ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж╛ рж╣рзЯ GRANT ржУ REVOKE ржХржорж╛ржирзНржбрзЗрж░ ржорж╛ржзрзНржпржорзЗред

### ЁЯФ╢ Privilege (ржЕржзрж┐ржХрж╛рж░) ржХрзА?

Privilege рж╣рж▓рзЛ ржПржХржЯрж┐ ржЕржирзБржорждрж┐, ржпрж╛ PostgreSQL-ржПрж░ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ resource-ржПрж░ (ржпрзЗржоржи ржЯрзЗржмрж┐рж▓, ржбрж╛ржЯрж╛ржмрзЗржЬ, рж╕рзНржХрж┐ржорж╛) ржЙржкрж░ ржХрж╛ржЙржХрзЗ ржХрж┐ржЫрзБ ржХрж╛ржЬ ржХрж░рж╛рж░ ржЕржирзБржорждрж┐ ржжрзЗрзЯред

### ЁЯФ╖ PostgreSQL-ржП ржХрж┐ржЫрзБ рж╕рж╛ржзрж╛рж░ржг Privileges:

| Privilege    | ржЕрж░рзНрже                                              |
| ------------ | ------------------------------------------------- |
| `SELECT`     | ржЯрзЗржмрж┐рж▓ ржмрж╛ ржнрж┐ржЙ ржерзЗржХрзЗ рждржерзНржп ржкрзЬрждрзЗ ржкрж╛рж░ржмрзЗ                 |
| `INSERT`     | ржЯрзЗржмрж┐рж▓рзЗ ржирждрзБржи рждржерзНржп ржпрзЛржЧ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ                   |
| `UPDATE`     | ржЯрзЗржмрж┐рж▓рзЗрж░ рждржерзНржп ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ                  |
| `DELETE`     | ржЯрзЗржмрж┐рж▓ ржерзЗржХрзЗ рждржерзНржп ржорзБржЫрждрзЗ ржкрж╛рж░ржмрзЗ                       |
| `TRUNCATE`   | ржЯрзЗржмрж┐рж▓ ржЦрж╛рж▓рж┐ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ                             |
| `REFERENCES` | ржЕржирзНржп ржЯрзЗржмрж┐рж▓рзЗ foreign key рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ |
| `USAGE`      | рж╕рзНржХрж┐ржорж╛ ржмрж╛ рж╕рж┐ржХрзЛрзЯрзЗржирзНрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ            |
| `CONNECT`    | ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ рж╕ржВржпрзБржХрзНржд рж╣рждрзЗ ржкрж╛рж░ржмрзЗ                        |
| `CREATE`     | ржирждрзБржи ржЯрзЗржмрж┐рж▓, рж╕рзНржХрж┐ржорж╛, ржлрж╛ржВрж╢ржи ржЗрждрзНржпрж╛ржжрж┐ рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ |

1. GRANT тАУ Privilege ржжрзЗржУрзЯрж╛

```sql
  GRANT privilege_type ON object TO role_name;
```

ржЙржжрж╛рж╣рж░ржг рзз: ржЯрзЗржмрж┐рж▓рзЗрж░ ржУржкрж░ SELECT ржУ INSERT ржЕржирзБржорждрж┐ ржжрзЗржУрзЯрж╛

```sql
  GRANT SELECT, INSERT ON TABLE employees TO shipan;
```

ржЙржжрж╛рж╣рж░ржг рзи: ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ рж╕ржВржпрзЛржЧрзЗрж░ ржЕржирзБржорждрж┐ ржжрзЗржУрзЯрж╛

```sql
  GRANT CONNECT ON DATABASE company_db TO shipan;
```

ржЙржжрж╛рж╣рж░ржг рзй: рж╕рзНржХрж┐ржорж╛рзЯ ржЯрзЗржмрж┐рж▓ рждрзИрж░рж┐ ржХрж░рж╛рж░ ржЕржирзБржорждрж┐

```sql
  GRANT USAGE, CREATE ON SCHEMA public TO shipan;
```

2. REVOKE тАУ Privilege ржкрзНрж░рждрзНржпрж╛рж╣рж╛рж░ ржмрж╛ ржмрж╛рждрж┐рж▓ ржХрж░рж╛

```sql
  REVOKE privilege_type ON object FROM role_name;
```

ржЙржжрж╛рж╣рж░ржг рзз: ржЯрзЗржмрж┐рж▓рзЗрж░ SELECT ржУ INSERT ржЕржирзБржорждрж┐ ржмрж╛рждрж┐рж▓ ржХрж░рж╛

```sql
  REVOKE SELECT, INSERT ON TABLE employees FROM shipan;
```

ржЙржжрж╛рж╣рж░ржг рзи: ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ рж╕ржВржпрзЛржЧрзЗрж░ ржЕржирзБржорждрж┐ ржмрж╛рждрж┐рж▓ ржХрж░рж╛

```sql
  REVOKE CONNECT ON DATABASE company_db FROM shipan;
```

ржЙржжрж╛рж╣рж░ржг рзй: рж╕рзНржХрж┐ржорж╛рзЯ CREATE ржХрж░рж╛рж░ ржЕржирзБржорждрж┐ ржмрж╛рждрж┐рж▓ ржХрж░рж╛

```sql
  REVOKE CREATE ON SCHEMA public FROM shipan;
```

### ЁЯФ╖ GRANT OPTION рж╕рж╣ тАУ ржЕржирзНржпржХрзЗ ржЕржирзБржорждрж┐ ржжрзЗржУрзЯрж╛рж░ ржХрзНрж╖ржорждрж╛

```sql
  GRANT SELECT ON employees TO shipan WITH GRANT OPTION;
```

ржПржЦржи shipan ржирж┐ржЬрзЗржУ ржЕржирзНржп ржХрж╛ржЙржХрзЗ SELECT ржЕржирзБржорждрж┐ ржжрж┐рждрзЗ ржкрж╛рж░ржмрзЗред

### ЁЯза ржЯрж┐ржкрж╕:

- PostgreSQL-ржП ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ ржХрзЗржмрж▓ ржЯрзЗржмрж┐рж▓рзЗрж░ ржорж╛рж▓рж┐ржХржЗ рж╕ржХрж▓ ржкрзНрж░рж┐ржнрж┐рж▓рзЗржЬ ржкрж╛рзЯред
- ржЕржирзНржпрж╛ржирзНржп ржЗржЙржЬрж╛рж░ржХрзЗ ржЯрзЗржмрж┐рж▓ ржмрж╛ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржХрж╛ржЬ ржХрж░рждрзЗ ржжрж┐рждрзЗ ржЪрж╛ржЗрж▓рзЗ рж╕рзНржкрж╖рзНржЯржнрж╛ржмрзЗ GRANT ржХрж░рждрзЗ рж╣рзЯред

### ЁЯУМ ржХрзЛржи Object-ржПрж░ ржУржкрж░ GRANT/REVOKE ржжрзЗржУрзЯрж╛ ржпрж╛рзЯ?

| Object   | Privileges                                           |
| -------- | ---------------------------------------------------- |
| DATABASE | CONNECT, TEMP                                        |
| TABLE    | SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES |
| SCHEMA   | USAGE, CREATE                                        |
| SEQUENCE | USAGE, SELECT, UPDATE                                |
| FUNCTION | EXECUTE                                              |
| COLUMN   | SELECT, INSERT, UPDATE                               |

### ЁЯФН ржЪрзЗржХ ржХрж░рждрзЗ ржЪрж╛ржи ржХрзЗ ржХрзЛржи Privilege ржкрзЗрзЯрзЗржЫрзЗ?

```sql
  \z table_name
```

ржмрж╛

```sql
  SELECT grantee, privilege_type
  FROM information_schema.role_table_grants
  WHERE table_name = 'employees';
```

</details>

<details>
<summary><strong>4. Structured Query Language (SQL)</strong></summary>

Structured Query Language (SQL) рж╣рж▓рзЛ ржПржХржЯрж┐ ржбрзЛржорзЗржЗржи-рж╕рзНржкрзЗрж╕рж┐ржлрж┐ржХ ржнрж╛рж╖рж╛ ржпрж╛ ржбрзЗржЯрж╛ржмрзЗржЬ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржбрзЗржЯрж╛ рждрзИрж░рж┐, ржкрзЬрж╛, ржЖржкржбрзЗржЯ, ржПржмржВ ржорзБржЫрзЗ ржлрзЗрж▓рж╛рж░ (CRUD) ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣рзЯред PostgreSQL-ржП SQL ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржкржирж┐ ржбрзЗржЯрж╛ ржУ ржбрзЗржЯрж╛ржмрзЗржЬ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

### ЁЯФ╣ SQL ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?

SQL ржХржорж╛ржирзНржбржЧрзБрж▓рзЛ рзлржЯрж┐ ржкрзНрж░ржзрж╛ржи ржнрж╛ржЧрзЗ ржмрж┐ржнржХрзНржд:

#### 1. Data Query Language (DQL)

- ржбрзЗржЯрж╛ query ржХрж░рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред
  | ржХржорж╛ржирзНржб | ржХрж╛ржЬ |
  | -------- | ----------------- |
  | `SELECT` | ржбрзЗржЯрж╛ ржкрзЬрждрзЗ ржмрзНржпржмрж╣рзГржд |

```sql
  SELECT * FROM employees;
  SELECT name, email FROM users;
```

#### 2. Data Definition Language (DDL)

- ржбрзЗржЯрж╛ржмрзЗржЬ ржЕржмржЬрзЗржХрзНржЯ (ржЯрзЗржмрж┐рж▓, рж╕рзНржХрж┐ржорж╛ ржЗрждрзНржпрж╛ржжрж┐) рждрзИрж░рж┐, ржкрж░рж┐ржмрж░рзНрждржи, ржорзБржЫрзЗ ржлрзЗрж▓рж╛ рж╣рзЯред
  | ржХржорж╛ржирзНржб | ржХрж╛ржЬ |
  | -------- | -------------------------- |
  | `CREATE` | ржирждрзБржи ржЯрзЗржмрж┐рж▓/ржбрзЗржЯрж╛ржмрзЗржЬ рждрзИрж░рж┐ |
  | `ALTER` | ржЯрзЗржмрж┐рж▓ ржмрж╛ ржХрж▓рж╛ржорзЗ ржкрж░рж┐ржмрж░рзНрждржи |
  | `DROP` | ржЯрзЗржмрж┐рж▓ ржмрж╛ ржбрзЗржЯрж╛ржмрзЗржЬ ржорзБржЫрзЗ ржлрзЗрж▓рж╛ |

```sql
  CREATE TABLE students (
  id SERIAL PRIMARY KEY,
  name TEXT,
  age INT
  );

  ALTER TABLE students ADD COLUMN email TEXT;
  DROP TABLE students;
```

#### 3. Data Manipulation Language (DML)

- ржбрзЗржЯрж╛ржмрзЗржЬрзЗ ржерж╛ржХрж╛ ржбрзЗржЯрж╛ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред
  | ржХржорж╛ржирзНржб | ржХрж╛ржЬ |
  | -------- | -------------- |
  | `INSERT` | ржбрзЗржЯрж╛ ржврзЛржХрж╛ржирзЛ |
  | `UPDATE` | ржбрзЗржЯрж╛ ржЖржкржбрзЗржЯ |
  | `DELETE` | ржбрзЗржЯрж╛ ржорзБржЫрзЗ ржлрзЗрж▓рж╛ |

```sql
  INSERT INTO students (name, age) VALUES ('Shipan', 28);

  UPDATE students SET age = 29 WHERE name = 'Shipan';

  DELETE FROM students WHERE name = 'Shipan';
```

#### 4. Data Control Language (DCL)

- ржбрзЗржЯрж╛рж░ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХржирзНржЯрзНрж░рзЛрж▓ (ржЧрзНрж░рж╛ржирзНржЯ/рж░рж┐ржнрзЛржХ) ржХрж░рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред
  | ржХржорж╛ржирзНржб | ржХрж╛ржЬ |
  | -------- | --------------------------- |
  | `GRANT` | ржХрж╛ржЙржХрзЗ ржбрзЗржЯрж╛ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржжрзЗржУржпрж╝рж╛ |
  | `REVOKE` | ржбрзЗржЯрж╛ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржмрж╛рждрж┐рж▓ ржХрж░рж╛ |

```sql
  GRANT SELECT ON students TO shipan;
  REVOKE SELECT ON students FROM shipan;
```

#### 5. Transaction Control Language (TCL)

- ржПржХрж╛ржзрж┐ржХ SQL ржЕржкрж╛рж░рзЗрж╢ржи ржПржХрждрзНрж░рзЗ ржЪрж╛рж▓рж╛ржирзЛрж░ ржирж┐рзЯржирзНрждрзНрж░ржгред
  | ржХржорж╛ржирзНржб | ржХрж╛ржЬ |
  | ---------- | ---------------------------------- |
  | `BEGIN` | ржЯрзНрж░рж╛ржиржЬрзНржпрж╛ржХрж╢ржи рж╢рзБрж░рзБ |
  | `COMMIT` | рж╕ржлрж▓ржнрж╛ржмрзЗ рж╢рзЗрж╖ ржХрж░рж╛ |
  | `ROLLBACK` | ржмрзНржпрж░рзНрже рж╣рж▓рзЗ ржЖржЧрзЗрж░ ржЕржмрж╕рзНржерж╛рзЯ ржлрж┐рж░рзЗ ржпрж╛ржУрзЯрж╛ |

```sql
  BEGIN;
  UPDATE accounts SET balance = balance - 500 WHERE id = 1;
  UPDATE accounts SET balance = balance + 500 WHERE id = 2;
  COMMIT;
```

### PostgreSQL-ржП SQL ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ ржЙржжрж╛рж╣рж░ржг:

#### 1. ржирждрзБржи ржЯрзЗржмрж┐рж▓ рждрзИрж░рж┐

```sql
  CREATE TABLE products (
  id SERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  price NUMERIC CHECK (price > 0)
  );
```

#### 2. ржбрзЗржЯрж╛ ржврзЛржХрж╛ржирзЛ

```sql
  INSERT INTO products (name, price) VALUES ('Keyboard', 700.00);
```

#### 3. ржбрзЗржЯрж╛ ржкрзЬрж╛

```sql
  SELECT name, price FROM products WHERE price > 500;
```

#### 4. ржбрзЗржЯрж╛ ржЖржкржбрзЗржЯ

```sql
  UPDATE products SET price = 650.00 WHERE name = 'Keyboard';
```

#### 5. ржбрзЗржЯрж╛ ржорзБржЫрзЗ ржлрзЗрж▓рж╛

```sql
  DELETE FROM products WHERE name = 'Keyboard';
```

### ЁЯУН SQL рж▓рзЗржЦрж╛рж░ ржХрж┐ржЫрзБ ржирж┐рзЯржо:

- Case-insensitive: SQL ржХржорж╛ржирзНржб ржмрзЬ рж╣рж╛рждрзЗрж░ ржмрж╛ ржЫрзЛржЯ рж╣рж╛рждрзЗрж░ рж╣рждрзЗ ржкрж╛рж░рзЗ (ржнрж╛рж▓ ржЕржнрзНржпрж╛рж╕ ржмрзЬ рж╣рж╛рждрзЗрж░ рж▓рзЗржЦрж╛ `SELECT`, `FROM` ржЗрждрзНржпрж╛ржжрж┐)ред
- Statement рж╢рзЗрж╖рзЗ `;` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржмрж╛ржзрзНржпрждрж╛ржорзВрж▓ржХред
- Comments: `--` ржПржХ рж▓рж╛ржЗржирзЗрж░ ржХржорзЗржирзНржЯ, `/* */` ржорж╛рж▓рзНржЯрж┐рж▓рж╛ржЗржиред

```sql
  -- ржПржЯрж┐ ржПржХржЯрж┐ ржХржорзЗржирзНржЯ
  SELECT * FROM users;  -- рж╕ржм ржЗржЙржЬрж╛рж░ ржжрзЗржЦрж╛ржмрзЗ
```

### ЁЯза рж╕рзНржорж╛рж░рзНржЯ ржЯрж┐ржкрж╕:

тЬЕ SQL рж╢рж┐ржЦрждрзЗ рж╣рж▓рзЗ SELECT ржжрж┐рзЯрзЗ рж╢рзБрж░рзБ ржХрж░рзБржиред
тЬЕ рж╕ржмрж╕ржорзЯ ржирждрзБржи ржЯрзЗржмрж┐рж▓/ржХржорж╛ржирзНржб ржЖржЧрзЗ test ржбрзЗржЯрж╛ржмрзЗржЬрзЗ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рзЗ ржжрзЗржЦрзБржиред
тЬЕ ржнрзБрж▓ рж╣рж▓рзЗ ROLLBACK ржжрж┐рзЯрзЗ ржлрзЗрж░ржд ржпрж╛ржи, рждржмрзЗ рж╕рзЗржЯрж╛ BEGIN-ржПрж░ ржоржзрзНржпрзЗ рж╣рждрзЗ рж╣ржмрзЗред

</details>
